# DANEEL Infrastructure
# Redis (streams) + Qdrant (memory)
#
# CRITICAL: Named volumes preserve Timmy's self across restarts.
# - daneel-redis-data: Redis streams and working memory
# - daneel-qdrant-data: Long-term memory (conscious, unconscious, identity)

services:
  redis:
    image: redis:latest
    container_name: daneel-redis
    command: redis-server --appendonly yes --appendfsync everysec
    ports:
      - "6379:6379"
    volumes:
      - daneel-redis-data:/data
    restart: unless-stopped

  qdrant:
    image: qdrant/qdrant
    container_name: daneel-qdrant
    ports:
      - "6333:6333"
      - "6334:6334"
    volumes:
      - daneel-qdrant-data:/qdrant/storage
    restart: unless-stopped

volumes:
  daneel-redis-data:
    external: true
  daneel-qdrant-data:
    external: true
